# Тестовый проект

Техническое задание - `documents/Тестовое задание Backend.pdf`

# Как тестировать

### Как запустить

Для запуска необходим компьютер на ОС:
* Windows 10/11
* Linux (дистрибутив не старше 2-3 лет, можно и такой но с обновленными пакетами)
* Mac OS (такая же ситуация как и с Linux)

На компьютере должен быть установлен Python версии 3.11+ (в ТЗ нет завертки в докер, так что вот так)
Далее нужно указать в `.env` файле данные как в файле `env.example`

После, если на линукс запускаем скрипт `sudo run_app.sh` он возможно попросит права администратора, 
можете ему предоставить (предварительно посмотреть что в скрипте всё ок)
и просто подождать пока всё скачается и установится и запуститься

Для виндовс всё тоже самое, только файл `run_app.bat`

Если не хотите заморачиваться с файлами можете запустить из команд представленных ниже:

```
    python3.11 -m venv venv
    source venv/bin/activate
    pip install -r requirements.txt
    python manage.py makemigrations
    python manage.py migrate
    python manage.py loaddata documents/dummy_data.json
    python manage.py runserver
```


### Авторизация

Доступна джанговская авторизация, суперюзер с такими кредами `admin:123`, 
также можно авторизироваться через микрозапрос по эндпоинту `http://127.0.0.1:8000/api/login?user_id=1`, 
где `user_id` может быть от одного до 3ёх, в файле `documents/dummy_data.json` есть только 3 юзера, если вы добавите ещё
то можно писать любой юзерайдишник пользователя который существует.

### Получение фида

Для получения фида нужно отправить запрос на эндпоинт `http://127.0.0.1:8000/api/users/1/`, 
где цифра это айди юзера, (так как по тз пользователь может просматривать только свою ленту, 
но при этом нужно указывать айди юзера в самом эндпоинте, и не давать ему доступа к просмотру других лент)

Также есть 2 опциональных параметра, это `search` и `page`, о них ниже:
* `search` - используется для полнотекстового поиска, в ТЗ не было указано какой он должен быть, 
    посему я решил такой сделать, параметр опциональный и он делает поиск по названиям как Ачивок, так и 
    Заметок
* `page` - используется для пагинации

В проекте есть `Swagger`, он доступен по ручке `http://127.0.0.1:8000/api/swagger`, 
запросы можно делать через него, или в проекте я прикреплю ещё постмен файл (`documents/test_task.postman_collection.json`) с коллекцией 
запросов для тестирования


### Рассуждение и логика

#### Иерархия директорий
Я работаю над построение новой иерархии директорий, и пока пришел к такому виду, вся бизнес логика происходит в `services`, 
там же происходят многие процессы которые нужны для работы основных приложений, будь то `Django`, `FastAPI`, телеграм бот, не важно, 
обычно в джанго я ещё все приложения джанго сливаю в папку `apps` ибо их может быть много, если вдруг с сервисом не повезло.

Остальные папки, такие как `constants`, `exceptions` сделаны для констант и исключений, они находят в рут директории по причине того,
чтоб потом работать с путями было легче, то есть, например в приложении `apps/fastapi/controllers/mts/provider.py`, в котором лежат
контроллеры для обработки запросов с мтс например от провайдера, если нужно будет указать какую-то константу, 
я также по абсолютно такому же пути создам файл и внесу в него константу, то есть выйдет так `constants/fastapi/controllers/mts/provider.py`
И тем самым мне будет проще взаимодействовать с константами и исключениями, ибо для каждого файла будет отдельный файл в константах или исключениях.

Я постоянно работаю над общей картиной так что возможно в будущем приду к чему-то более лучшему, однако пока дошел до такого пока что.

В каждой директории есть файл `__init__.py` c помощью которого идёт описания что данный модуль делает, 
очень помогает в будущем в генерации документации

#### Пакетный менеджер

В директории можно заметить файл `pyproject.toml`, я работаю в основном с `poetry` пакетным менеджером так как он предоставляет больше возможностей
и более гибкий функционал, однако для разворачивания я слил все зависимости в `requirements.txt` для удобства тестирования задания

#### Логирование

В проекте на автомате добавил любимый логгер `loguru`, но нигде его не использовал, однако на проектах часто им пользуюсь ибо он такой же
гибкий как и логгер, но настраивается в разы проще и также потокобезопасен

#### О логике кода

Я следую многим принципам проектирования, однако в данном задании смог показать не все, самые главные которые удалось реализовать это
принцип единой отвественности, не повторять код, и держать его в простом, читаемом состоянии

#### Если есть какие-то вопросы

Пишите, не стесняйтесь, объясню что почему и как делал


# TODO

[x] - проапать доку в ридми
[x] - настроить скрипт для запуска
[x] - описать инструкцию для запуска для виндовса
[x] - не забыть слить зависимости в requirements.txt
[x] - обновить до актуального env.example
[x] - описать быструю афторизацию
[x] - выгрузить фактуры
